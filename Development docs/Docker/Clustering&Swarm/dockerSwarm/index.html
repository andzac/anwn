



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
        <meta name="author" content="Andrea Zaccaro (@andzac)">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.3, mkdocs-material-3.0.4">
    
    
      
        <title>Clustering - Andnotes</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../../../#clustering" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../../.." title="Andnotes" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Andnotes
              </span>
              <span class="md-header-nav__topic">
                Clustering
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../../.." title="Andnotes" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Andnotes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../.." title="Homepage" class="md-nav__link">
      Homepage
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../about/" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Czech Lessons
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Czech Lessons
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../Czech Lessons/accent/" title="Alphabet" class="md-nav__link">
      Alphabet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../Czech Lessons/pronouns/" title="Personal pronouns" class="md-nav__link">
      Personal pronouns
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../Czech Lessons/ten_activities/" title="Ten activities" class="md-nav__link">
      Ten activities
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Development docs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Development docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1" checked>
    
    <label class="md-nav__link" for="nav-4-1">
      Docker
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        Docker
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../UsefulCommand/" title="Most used Docker commands" class="md-nav__link">
      Most used Docker commands
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-2" type="checkbox" id="nav-4-1-2" checked>
    
    <label class="md-nav__link" for="nav-4-1-2">
      Clustering&Swarm
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-2">
        Clustering&Swarm
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Clustering
      </label>
    
    <a href="./" title="Clustering" class="md-nav__link md-nav__link--active">
      Clustering
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-docker-swarm-for-clustering" title="Using docker swarm for clustering" class="md-nav__link">
    Using docker swarm for clustering
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note" title="NOTE" class="md-nav__link">
    NOTE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_1" title="NOTE" class="md-nav__link">
    NOTE
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#obtain-list-of-nodes-in-the-cluster" title="Obtain list of nodes in the cluster" class="md-nav__link">
    Obtain list of nodes in the cluster
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#discovery-services" title="Discovery services" class="md-nav__link">
    Discovery services
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-filters-with-docker-swarm" title="Using filters with docker swarm" class="md-nav__link">
    Using filters with docker swarm
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note_2" title="NOTE" class="md-nav__link">
    NOTE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filter-types" title="Filter types:" class="md-nav__link">
    Filter types:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_3" title="NOTE" class="md-nav__link">
    NOTE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_4" title="NOTE" class="md-nav__link">
    NOTE
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-a-container-using-a-filter" title="Running a container using a filter" class="md-nav__link">
    Running a container using a filter
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note_5" title="NOTE" class="md-nav__link">
    NOTE
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#swarm-strategies" title="Swarm strategies" class="md-nav__link">
    Swarm strategies
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-3" type="checkbox" id="nav-4-1-3">
    
    <label class="md-nav__link" for="nav-4-1-3">
      Docker compose
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-3">
        Docker compose
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Docker compose/dockerCompose/" title="dockerCompose" class="md-nav__link">
      dockerCompose
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-4" type="checkbox" id="nav-4-1-4">
    
    <label class="md-nav__link" for="nav-4-1-4">
      Labeling
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-4">
        Labeling
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Labeling/label/" title="Label" class="md-nav__link">
      Label
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Eclipse Che
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Eclipse Che
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Eclipse Che/randomNotes/" title="randomNotes" class="md-nav__link">
      randomNotes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2-2" type="checkbox" id="nav-4-2-2">
    
    <label class="md-nav__link" for="nav-4-2-2">
      Tree Management
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-2-2">
        Tree Management
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Eclipse Che/Tree Management/SimpleTree/" title="Manage tree in Eclipse Che" class="md-nav__link">
      Manage tree in Eclipse Che
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Java
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Java
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-1" type="checkbox" id="nav-4-3-1">
    
    <label class="md-nav__link" for="nav-4-3-1">
      JSON RPC
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-3-1">
        JSON RPC
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Java/JSON-RPC/json-rpc/" title="JSON RPC standard" class="md-nav__link">
      JSON RPC standard
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-2" type="checkbox" id="nav-4-3-2">
    
    <label class="md-nav__link" for="nav-4-3-2">
      Java 8 functionalities
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-3-2">
        Java 8 functionalities
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Java/Java-8 functionalities/ExecutorService/" title="ExecutorService" class="md-nav__link">
      ExecutorService
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Java/Java-8 functionalities/ForkJoin/" title="Fork/Join framework" class="md-nav__link">
      Fork/Join framework
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Java/Java-8 functionalities/Future/" title="Multithread with CompletableFuture" class="md-nav__link">
      Multithread with CompletableFuture
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4">
    
    <label class="md-nav__link" for="nav-4-4">
      Language Server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        Language Server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Language Server/ClientServerHandshake/" title="Manage client-server communication with LSP4J" class="md-nav__link">
      Manage client-server communication with LSP4J
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Language Server/VS-Code Extension/" title="VS-Code extension for the Language Server" class="md-nav__link">
      VS-Code extension for the Language Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Language Server/langserver-spec/" title="Langage Server specification" class="md-nav__link">
      Langage Server specification
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Language Server/lsp4j/" title="Implement a Language Server in java" class="md-nav__link">
      Implement a Language Server in java
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Language Server/why-lsp/" title="Why a LSP?" class="md-nav__link">
      Why a LSP?
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Maven
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Maven
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Maven/maven-multi-project/" title="Apache Maven dev note" class="md-nav__link">
      Apache Maven dev note
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6" type="checkbox" id="nav-4-6">
    
    <label class="md-nav__link" for="nav-4-6">
      Serverless
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-6">
        Serverless
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Serverless/openFaaS/" title="OpenFaas for Serverless" class="md-nav__link">
      OpenFaas for Serverless
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-7" type="checkbox" id="nav-4-7">
    
    <label class="md-nav__link" for="nav-4-7">
      TypeScript6
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-7">
        TypeScript6
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../TypeScript6/typescript/" title="Typescript" class="md-nav__link">
      Typescript
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-8" type="checkbox" id="nav-4-8">
    
    <label class="md-nav__link" for="nav-4-8">
      Mkdocs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-8">
        Mkdocs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mkdocs/Project layout/" title="Project layout" class="md-nav__link">
      Project layout
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mkdocs/commands/" title="Commands" class="md-nav__link">
      Commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mkdocs/theming/" title="Theming" class="md-nav__link">
      Theming
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      English lessons
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        English lessons
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../English lessons/newTerms/" title="newTerms" class="md-nav__link">
      newTerms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../English lessons/verbs/" title="Verbs" class="md-nav__link">
      Verbs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Life in Prague
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Life in Prague
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../Life in Prague/Useful information/" title="Useful information" class="md-nav__link">
      Useful information
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      OS2018
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        OS2018
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-1" type="checkbox" id="nav-7-1">
    
    <label class="md-nav__link" for="nav-7-1">
      Egkatastasis
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-1">
        Egkatastasis
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../OS2018/Egkatastasis/egkatastasis/" title="OpenSUSE Egkatastasis" class="md-nav__link">
      OpenSUSE Egkatastasis
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" type="checkbox" id="nav-7-2">
    
    <label class="md-nav__link" for="nav-7-2">
      Logging Container
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-2">
        Logging Container
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../OS2018/Logging Container/syslog-ng/" title="Logging container with syslog-ng" class="md-nav__link">
      Logging container with syslog-ng
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-docker-swarm-for-clustering" title="Using docker swarm for clustering" class="md-nav__link">
    Using docker swarm for clustering
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note" title="NOTE" class="md-nav__link">
    NOTE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_1" title="NOTE" class="md-nav__link">
    NOTE
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#obtain-list-of-nodes-in-the-cluster" title="Obtain list of nodes in the cluster" class="md-nav__link">
    Obtain list of nodes in the cluster
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#discovery-services" title="Discovery services" class="md-nav__link">
    Discovery services
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-filters-with-docker-swarm" title="Using filters with docker swarm" class="md-nav__link">
    Using filters with docker swarm
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note_2" title="NOTE" class="md-nav__link">
    NOTE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filter-types" title="Filter types:" class="md-nav__link">
    Filter types:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_3" title="NOTE" class="md-nav__link">
    NOTE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_4" title="NOTE" class="md-nav__link">
    NOTE
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-a-container-using-a-filter" title="Running a container using a filter" class="md-nav__link">
    Running a container using a filter
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note_5" title="NOTE" class="md-nav__link">
    NOTE
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#swarm-strategies" title="Swarm strategies" class="md-nav__link">
    Swarm strategies
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="clustering">Clustering</h1>
<p>In basis it is required to manage docker container running on multiple hosts in a distributed enviroment</p>
<ul>
<li>it helps to scale docker container effectively</li>
<li>solution for enterprice</li>
<li>there is a manager host and more agent on other host that will join in the Cluster</li>
<li>each software or implementation of the clustering shouldn't violate the docker client principles, it will be possible using CLI to perform the basic docker command in the cluster.</li>
<li>when is necessary realize a cluster (or perform scaling ops) is necessary keep in mind some prerequisite that linux OS needs, as right permission, volume handling and so on</li>
</ul>
<h2 id="using-docker-swarm-for-clustering">Using docker swarm for clustering</h2>
<ol>
<li>Grab the latest version with the command:</li>
</ol>
<pre><code class="sh">docker pull swarm
</code></pre>

<ol>
<li>create a simple swarm</li>
</ol>
<pre><code class="sh">docker run --rm swarm create
</code></pre>

<p>This process will return the token id that will be used by the other nodes that will be involving in the cluster. It is unique identifier in the cluster and it could be used also to grab information about the cluster (how many nodes are defined into the cluster and so on).</p>
<h3 id="note">NOTE</h3>
<blockquote>
<blockquote>
<p>When is necessary use the token (to discover services for example) in necessary use only the first 5 digits.</p>
</blockquote>
</blockquote>
<ol>
<li>start to create a new node into the created cluster wuth the command</li>
</ol>
<pre><code class="sh">sudo docker -H tcp://&lt;host_id&gt;:&lt;port_id&gt; -d &amp;
</code></pre>

<p>So now the new node with the IP above will be the default socket and the daemon will try to create the node in the cluster and waiting for connection.
The complexity of this operation is that is necessary manage the docker socket and perform some dangerous operation, that can be skipped simply using docker swarm</p>
<h3 id="note_1">NOTE</h3>
<blockquote>
<blockquote>
<p>Before create the cluster there are a list of checks that need to be reviewed before to create the swarm as example verify that TLS is enabled and other stuff.
<a href="https://docs.docker.com/engine/swarm/swarm-tutorial/#set-up">see docker checks</a></p>
</blockquote>
</blockquote>
<h2 id="obtain-list-of-nodes-in-the-cluster">Obtain list of nodes in the cluster</h2>
<p>Using the token id is very simple retreive the nodes defined in the cluster:</p>
<pre><code class="sh">docker run --rm swarm list token://&lt;token_id&gt;

</code></pre>

<h2 id="discovery-services">Discovery services</h2>
<p>There are some algorithmics that allow a node to join in a exsisting cluster.
In order to discover a cluster for the defined node is possible invoke the command:</p>
<pre><code class="sh">docker run swarm join --advertise=&lt;host_id&gt;:&lt;port_id&gt; token://&lt;token_id&gt;
</code></pre>

<p>Is so possible verify if the node master with the given id is ready to manage other nodes that should be added in the cluster <a href="https://docs.docker.com/engine/swarm/swarm-tutorial/add-nodes/">in according with this reference.</a></p>
<h2 id="using-filters-with-docker-swarm">Using filters with docker swarm</h2>
<ul>
<li>Filters are used to schedule containers on a subset of nodes</li>
<li>they are an important part of the docker swarm manager command</li>
<li>there are several filters flag that can be used along with the swarm command to manage a particular kind of nodes.</li>
<li>some example: deploy a container on nodes that have ssd as storage drive, or are located on the east coast of US, or are production nodes, and so on.</li>
</ul>
<h3 id="note_2">NOTE</h3>
<blockquote>
<blockquote>
<p>if more than one node are selected during the filter operation, docker manage will select one random nodes from these result list.</p>
</blockquote>
</blockquote>
<h3 id="filter-types">Filter types:</h3>
<ul>
<li><strong>constraint</strong></li>
<li>key/value associated to a particular nodes</li>
</ul>
<p>```sh
  docker run -d -P -e constraint:storage=ssd --name test nginx</p>
<p>```</p>
<ul>
<li><strong>affinity</strong></li>
<li>attach container based on a given label, id or name</li>
<li>we can instruct docker to run a container in a node and the next in another specified node. This could allow that the containers are all in the same network.</li>
</ul>
<h3 id="example">Example</h3>
<ul>
<li>Spawn the first container (called frontend) as usual:</li>
</ul>
<pre><code class="sh">docker run -d -p 80:80 --name nginx_server nginx
</code></pre>

<ul>
<li>
<p>Generate the next container defining an affinity with the previous container created:
  <code>sh
  docker run -d --name second_container -e affinity:container==nginx_server nginx</code></p>
</li>
<li>
<p><strong>port</strong></p>
</li>
<li>node selection based on a specific port</li>
<li>i.e. spawn containers that have the port 80 exposed. Of course these containers are defined on multiple host in the cluster</li>
</ul>
<pre><code class="sh">docker run -d -p 80:80 --name nginx_server nginx
</code></pre>

<h3 id="note_3">NOTE</h3>
<blockquote>
<blockquote>
<p>if we try to run this command more than one time on a single node, at the second time docker reply with an error message because on the single node there are already defined a container that use the port 80.
But if we try this command on a cluster with several nodes, the port filters allow us that the docker swarm engine will checks if there is another node in the cluster that have the 80 available and is not already occupied by a container.</p>
</blockquote>
</blockquote>
<ul>
<li><strong>dependency</strong></li>
<li>node selection based on a given dependent volume or link</li>
</ul>
<pre><code class="sh">docker run -d -P --link=dependency:db1 --name db2 nginx
</code></pre>

<p>Here we assume there is an exsisting container called db1, and docker swarm engine will try to spawn the new container db2 on the same node where are defined db1 because db2 have a dependency from db1.</p>
<h3 id="note_4">NOTE</h3>
<blockquote>
<blockquote>
<p>if docker can't resolve the dependency (for example because the db1 container doesn't exsist), the db2 creation is stopped and the container is not created.</p>
</blockquote>
</blockquote>
<ul>
<li><strong>health</strong></li>
<li>scheduling containers on unhealthy nodes</li>
<li>standard filters provided by docker itself out of the box (node ID/node name, storagedriver, kernelversion and so on)</li>
</ul>
<h2 id="running-a-container-using-a-filter">Running a container using a filter</h2>
<p>For example I want launch nginx container on nodes of a given cluster that have ssd storage drive:</p>
<h3 id="note_5">NOTE</h3>
<blockquote>
<blockquote>
<ul>
<li><strong>-d</strong> flag is for launch the container as daemon</li>
<li><strong>-P</strong> flag is for the port</li>
<li><strong>-e</strong> for the constraint (with the assumption that
exsist a label or property for the constraint define)ù</li>
<li><strong>-m</strong> flat to associate an amount of memory</li>
</ul>
</blockquote>
</blockquote>
<h2 id="swarm-strategies">Swarm strategies</h2>
<ul>
<li>Swarming on a cluster is a complex operation under the hood, but from the docker prospective is just an API that could be used to define our infrastructure</li>
<li>Docker swarm support internally multiple strategy to allocate containers that are partecipating in a cluster.</li>
<li>Strategies are algorithmics that determine the score to rank a node in a cluster</li>
<li>Depending on the strategy applied a container can be defined on a node or on a different one.</li>
<li>The container will be defined on the node with the maximum score, based on a given strategy.</li>
<li>The flag --swarm-strategy &lt; binpack | random | spread &gt; should be used when the node is created in the cluster</li>
<li>
<p>Actually there are three types of strategies:</p>
</li>
<li>
<p><strong>BinPack:</strong></p>
<ul>
<li>favor nodes that are running the maximum number of containers.</li>
<li>this strategy allow to use at max as possible the space/memory capacity of a node before create or use another one</li>
</ul>
</li>
<li><strong>Random:</strong><ul>
<li>is more simple but could became very dangerous if the selected container is full</li>
<li>could be not used in production enviroment</li>
</ul>
</li>
<li><strong>Spread:</strong><ul>
<li>it allow to select only the nodes with the minumum number of running containers. This could be a good strategy to minimize the effort necessary to restart containers on a node that for some reasons crash.</li>
</ul>
</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../UsefulCommand/" title="Most used Docker commands" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Most used Docker commands
              </span>
            </div>
          </a>
        
        
          <a href="../../Docker compose/dockerCompose/" title="dockerCompose" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                dockerCompose
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.3",url:{base:"../../../.."}})</script>
      
    
    
      
    
  </body>
</html>