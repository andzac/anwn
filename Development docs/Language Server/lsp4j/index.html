



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
        <meta name="author" content="Andrea Zaccaro (@andzac)">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.3, mkdocs-material-3.0.4">
    
    
      
        <title>Implement a Language Server in java - Andnotes</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../../#implement-a-language-server-in-java" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="Andnotes" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Andnotes
              </span>
              <span class="md-header-nav__topic">
                Implement a Language Server in java
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="Andnotes" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Andnotes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Homepage" class="md-nav__link">
      Homepage
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../about/" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Czech Lessons
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Czech Lessons
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Czech Lessons/accent/" title="Alphabet" class="md-nav__link">
      Alphabet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Czech Lessons/pronouns/" title="Personal pronouns" class="md-nav__link">
      Personal pronouns
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Czech Lessons/ten_activities/" title="Ten activities" class="md-nav__link">
      Ten activities
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Development docs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Development docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      Docker
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        Docker
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Docker/UsefulCommand/" title="Most used Docker commands" class="md-nav__link">
      Most used Docker commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-2" type="checkbox" id="nav-4-1-2">
    
    <label class="md-nav__link" for="nav-4-1-2">
      Clustering&Swarm
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-2">
        Clustering&Swarm
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Docker/Clustering&Swarm/dockerSwarm/" title="Clustering" class="md-nav__link">
      Clustering
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-3" type="checkbox" id="nav-4-1-3">
    
    <label class="md-nav__link" for="nav-4-1-3">
      Docker compose
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-3">
        Docker compose
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Docker/Docker compose/dockerCompose/" title="dockerCompose" class="md-nav__link">
      dockerCompose
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-4" type="checkbox" id="nav-4-1-4">
    
    <label class="md-nav__link" for="nav-4-1-4">
      Labeling
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-4">
        Labeling
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Docker/Labeling/label/" title="Label" class="md-nav__link">
      Label
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Eclipse Che
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Eclipse Che
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Eclipse Che/randomNotes/" title="randomNotes" class="md-nav__link">
      randomNotes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2-2" type="checkbox" id="nav-4-2-2">
    
    <label class="md-nav__link" for="nav-4-2-2">
      Tree Management
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-2-2">
        Tree Management
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Eclipse Che/Tree Management/SimpleTree/" title="Manage tree in Eclipse Che" class="md-nav__link">
      Manage tree in Eclipse Che
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Java
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Java
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-1" type="checkbox" id="nav-4-3-1">
    
    <label class="md-nav__link" for="nav-4-3-1">
      JSON RPC
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-3-1">
        JSON RPC
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Java/JSON-RPC/json-rpc/" title="JSON RPC standard" class="md-nav__link">
      JSON RPC standard
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-2" type="checkbox" id="nav-4-3-2">
    
    <label class="md-nav__link" for="nav-4-3-2">
      Java 8 functionalities
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-3-2">
        Java 8 functionalities
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Java/Java-8 functionalities/ExecutorService/" title="ExecutorService" class="md-nav__link">
      ExecutorService
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Java/Java-8 functionalities/ForkJoin/" title="Fork/Join framework" class="md-nav__link">
      Fork/Join framework
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Java/Java-8 functionalities/Future/" title="Multithread with CompletableFuture" class="md-nav__link">
      Multithread with CompletableFuture
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4" checked>
    
    <label class="md-nav__link" for="nav-4-4">
      Language Server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        Language Server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../ClientServerHandshake/" title="Manage client-server communication with LSP4J" class="md-nav__link">
      Manage client-server communication with LSP4J
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../VS-Code Extension/" title="VS-Code extension for the Language Server" class="md-nav__link">
      VS-Code extension for the Language Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../langserver-spec/" title="Langage Server specification" class="md-nav__link">
      Langage Server specification
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Implement a Language Server in java
      </label>
    
    <a href="./" title="Implement a Language Server in java" class="md-nav__link md-nav__link--active">
      Implement a Language Server in java
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#communication-through-json-rpc-20" title="Communication through JSON-RPC 2.0" class="md-nav__link">
    Communication through JSON-RPC 2.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implement-a-ls-in-java" title="Implement a LS in Java" class="md-nav__link">
    Implement a LS in Java
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-in-depth-implementation" title="More in depth implementation" class="md-nav__link">
    More in depth implementation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implementation-notes" title="Implementation notes" class="md-nav__link">
    Implementation notes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_1" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_2" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note-1" title="Note - 1" class="md-nav__link">
    Note - 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note-2" title="Note - 2" class="md-nav__link">
    Note - 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_3" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../why-lsp/" title="Why a LSP?" class="md-nav__link">
      Why a LSP?
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Maven
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Maven
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Maven/maven-multi-project/" title="Apache Maven dev note" class="md-nav__link">
      Apache Maven dev note
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6" type="checkbox" id="nav-4-6">
    
    <label class="md-nav__link" for="nav-4-6">
      Serverless
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-6">
        Serverless
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Serverless/openFaaS/" title="OpenFaas for Serverless" class="md-nav__link">
      OpenFaas for Serverless
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-7" type="checkbox" id="nav-4-7">
    
    <label class="md-nav__link" for="nav-4-7">
      TypeScript6
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-7">
        TypeScript6
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../TypeScript6/typescript/" title="Typescript" class="md-nav__link">
      Typescript
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-8" type="checkbox" id="nav-4-8">
    
    <label class="md-nav__link" for="nav-4-8">
      Mkdocs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-8">
        Mkdocs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../mkdocs/Project layout/" title="Project layout" class="md-nav__link">
      Project layout
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mkdocs/commands/" title="Commands" class="md-nav__link">
      Commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mkdocs/theming/" title="Theming" class="md-nav__link">
      Theming
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      English lessons
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        English lessons
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../English lessons/newTerms/" title="newTerms" class="md-nav__link">
      newTerms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../English lessons/verbs/" title="Verbs" class="md-nav__link">
      Verbs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Life in Prague
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Life in Prague
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Life in Prague/Useful information/" title="Useful information" class="md-nav__link">
      Useful information
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      OS2018
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        OS2018
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-1" type="checkbox" id="nav-7-1">
    
    <label class="md-nav__link" for="nav-7-1">
      Egkatastasis
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-1">
        Egkatastasis
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../OS2018/Egkatastasis/egkatastasis/" title="OpenSUSE Egkatastasis" class="md-nav__link">
      OpenSUSE Egkatastasis
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" type="checkbox" id="nav-7-2">
    
    <label class="md-nav__link" for="nav-7-2">
      Logging Container
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-2">
        Logging Container
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../OS2018/Logging Container/syslog-ng/" title="Logging container with syslog-ng" class="md-nav__link">
      Logging container with syslog-ng
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#communication-through-json-rpc-20" title="Communication through JSON-RPC 2.0" class="md-nav__link">
    Communication through JSON-RPC 2.0
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implement-a-ls-in-java" title="Implement a LS in Java" class="md-nav__link">
    Implement a LS in Java
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-in-depth-implementation" title="More in depth implementation" class="md-nav__link">
    More in depth implementation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implementation-notes" title="Implementation notes" class="md-nav__link">
    Implementation notes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_1" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_2" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note-1" title="Note - 1" class="md-nav__link">
    Note - 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note-2" title="Note - 2" class="md-nav__link">
    Note - 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_3" title="Note" class="md-nav__link">
    Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="implement-a-language-server-in-java">Implement a Language Server in java</h1>
<p>The definition of Language server introduced by Microsoft can revolutionize the way to define common operations made available for an editor.</p>
<p>Several time ago when an editor was created, it was necessary implement all the business logic to provide some activities very common in an code editor as keyword highlighting, auto-hint and auto-complete and so on. But what happens if I define only one language server and provide a way to use it as a server that send/receive messages from multiple editor (clients)?</p>
<h2 id="communication-through-json-rpc-20">Communication through JSON-RPC 2.0</h2>
<p>The communication between editor clients and language server are made using JSON-RPC protocol but it is also possible add HTTP level transportation on top. In this way is possible consume the LS as a remote server with URL endpoints to establish the communication and also provide some health checks.</p>
<p>The communication is bidirectional, this means that both client and server can send and receive messages from/to the opposite component.</p>
<p><img alt="basic communication" src="../img/language-server-sequence.png" /></p>
<p>More information about standards, specification and provided implementations for several languages in the <a href="">link</a></p>
<h2 id="implement-a-ls-in-java">Implement a LS in Java</h2>
<p>The language server specification provided by Microsoft consists in a collection of interfaces with specific responsibility for each kind of operation that the LS implementation want support or not.
In order to define the capabilities of our LS is necessary implements the interfaces provided by the standard.
On Java side there is a very useful collection of interfaces for LSP standard: <a href="https://github.com/eclipse/lsp4j">LSP4J</a>.</p>
<h2 id="more-in-depth-implementation">More in depth implementation</h2>
<h3 id="implementation-notes">Implementation notes</h3>
<blockquote>
<p>In this workaround, client and sever components are defined in the same Java project setting up using Maven. The output of our personal LS server will be a jar that will be invoked from the shell.</p>
</blockquote>
<p>First of all add LSP4J/LSP4J JSON-RPC as maven dependency into the <code>pom.xml</code>:</p>
<pre><code class="xml">&lt;!-- https://mvnrepository.com/artifact/org.eclipse.lsp4j/org.eclipse.lsp4j.jsonrpc --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.eclipse.lsp4j&lt;/groupId&gt;
  &lt;artifactId&gt;org.eclipse.lsp4j.jsonrpc&lt;/artifactId&gt;
  &lt;version&gt;0.4.1&lt;/version&gt;
&lt;/dependency&gt;

&lt;!-- https://mvnrepository.com/artifact/org.eclipse.lsp4j/org.eclipse.lsp4j --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.eclipse.lsp4j&lt;/groupId&gt;
  &lt;artifactId&gt;org.eclipse.lsp4j&lt;/artifactId&gt;
  &lt;version&gt;0.4.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>After that we need to define two interfaces that extends the LanguageServer and the LanguageClient. Of course we need to define its implementation classes to be able to made some action as client or as server.</p>
<h3 id="note">Note</h3>
<blockquote>
<p>The interfaces <code>LanguageServer</code> and <code>LanguageClient</code> implement the Endpoint interface. In this way the underhood communication layer from clients to the server is already managed.</p>
</blockquote>
<pre><code class="Java">@JsonSegment(&quot;server&quot;)
public interface IMyLanguageServer extends LanguageServer {}

@JsonSegment(&quot;client&quot;)
public interface IMyLanguageClient extends LanguageClient {
    public void start(LanguageServer serverLauncher);
}
</code></pre>

<h3 id="note_1">Note</h3>
<blockquote>
<p>The annotation <code>@JsonSegment</code> are provided by LSP4J and are used to define the internal routing of our methods. For example for the client start method the URI will be /client/start.</p>
</blockquote>
<p>The server concrete implementation:</p>
<pre><code class="Java">public class MyLanguageServerImpl implements IMyLanguageServer {
  private final List&lt;LanguageClient&gt; clients = new CopyOnWriteArrayList&lt;&gt;();
  private TextDocumentService textService;
  private WorkspaceService workspaceService;

  public MyLanguageServerImpl() {
    //initialize textDocumentService and workspaceService
  }

  public CompletableFuture&lt;InitializeResult&gt; initialize(InitializeParams params) {
    // TODO Auto-generated method stub
    return null;
  }

  public CompletableFuture&lt;Object&gt; shutdown() {
    // TODO Auto-generated method stub
    return null;
  }

  public void exit() {
    // TODO Auto-generated method stub

  }

  public TextDocumentService getTextDocumentService() {
    // TODO Auto-generated method stub
    return null;
  }

  public WorkspaceService getWorkspaceService() {
    // TODO Auto-generated method stub
    return null;
  }

  public Runnable setRemoteProxy(LanguageClient languageClient) {
    this.clients.add(languageClient);
    return () -&gt; this.clients.remove(languageClient);
  }

  public List&lt;LanguageClient&gt; getClientList() {
    return clients;
  }
}
</code></pre>

<h3 id="note_2">Note</h3>
<blockquote>
<p>In this overview is not specified the entire implementation of the language server implementation, because the focus is on the set of operations to define the LS and be able to listen for incoming communications with other clients.
A more in depth overview about LS implementation will be added in the future in a separate post.</p>
</blockquote>
<p>And the client concrete implementation:</p>
<pre><code class="java">public class MyLanguageClientImpl implements IMyLanguageClient {

  public void telemetryEvent(Object object) {
    // TODO Auto-generated method stub

  }

  public void publishDiagnostics(PublishDiagnosticsParams diagnostics) {
    // TODO Auto-generated method stub

  }

  public void showMessage(MessageParams messageParams) {
    // TODO Auto-generated method stub

  }

  public CompletableFuture&lt;MessageActionItem&gt; showMessageRequest(
      ShowMessageRequestParams requestParams) {
    // TODO Auto-generated method stub
    return null;
  }

  public void logMessage(MessageParams message) {
    // TODO Auto-generated method stub

  }

  @Override
  public void start(LanguageServer serverLauncher) {
    System.out.println(&quot;CLIENT SEND REQUEST TO THE SERVER&quot;);
    serverLauncher.initialize(null);
  }
}
</code></pre>

<h3 id="note-1">Note - 1</h3>
<blockquote>
<p>In a common scenario where the language server is used by a well defined client is not necessary implement both client and server, but just the server.
The underline communication with JSON-RPC will be able to realize the sharing messages from the two actors.</p>
</blockquote>
<h3 id="note-2">Note - 2</h3>
<blockquote>
<p>The <code>start()</code> method defined in the client interface will be used in the main and using the communication channel provided by the server we can send a request to the server.</p>
</blockquote>
<p>After that as last step is necessary define the main method and turn all on in order to implement the client/server comunication:</p>
<pre><code class="Java">public class App {
  static Logger logger = LogManager.getLogger(Main.class);

  public static void main(String[] args) throws InterruptedException, ExecutionException {
    logger.warn(&quot;Start debugging&quot;);
    startServer(System.in, System.out);
  }

  public static void startServer(InputStream in, OutputStream out)
      throws InterruptedException, ExecutionException {
    MyLanguageServerImpl myServer = new MyLanguageServerImpl();

    Launcher&lt;LanguageClient&gt; l = LSPLauncher.createServerLauncher(myServer, in, out);
    Future&lt;?&gt; startListening = l.startListening();
    myServer.setRemoteProxy(l.getRemoteProxy());
    startListening.get();
  }
}
</code></pre>

<p>So the key method is <code>createServerLauncher()</code>.
Their purpose is to create the endpoint for the opposite site (that need to know who want call it) and manage the stream channel communication (in this case will be the standard input and standard output).</p>
<ul>
<li>
<p><code>startListining()</code> allow the server to be in listening mode for incoming connection from a client.</p>
</li>
<li>
<p><code>setRemoteProxy()</code> is invoked to register the language client retrieved by the proxy (Launcher<LanguageCLient>) into the internal list that will be used by the other services defined in order to be compliant with the LSP standard (i.e. TextDocumentService concrete implementation class).</p>
</li>
</ul>
<p>When everything is defined correctly is possible deploy the jar with the maven command <code>mvn package</code> and in order to test that the server doesn't go in some exceptions is possible run it from the terminal, into the target folder where the jar is generated:</p>
<pre><code class="sh">java -jar mylangserver-0.0.1-jar-with-dependencies.jar
</code></pre>

<p>A possible output could be this one:</p>
<pre><code class="sh">09:35:17.647 [main] WARN  com.test.lsp.Main - Start debugging
_
</code></pre>

<h3 id="note_3">Note</h3>
<blockquote>
<p>If the client already exsist and it is compliant to the LSP definition is not necessary start the server in a standalone mode but is necessary provide a plugin that define the path of the language server and provide the client implementation of the LSP.
In the next posts will be analyzed the definition of client implementation realized with:
- Visual Studio Code extension plugin
- Eclipse IDE plugin
- Eclipse Che
The cool things (and obliviously the success of the LSP approach) is that for three different client there is only ONE implementation of the LS.</p>
</blockquote>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../langserver-spec/" title="Langage Server specification" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Langage Server specification
              </span>
            </div>
          </a>
        
        
          <a href="../why-lsp/" title="Why a LSP?" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Why a LSP?
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.3",url:{base:"../../.."}})</script>
      
    
    
      
    
  </body>
</html>